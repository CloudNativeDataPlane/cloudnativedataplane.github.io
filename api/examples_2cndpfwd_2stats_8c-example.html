<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<!--<meta charset="utf-8">-->
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CNDP: examples/cndpfwd/stats.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/styles.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/custom_doxygen.css" rel="stylesheet" type="text/css" />
<link href="/assets/images/favicon.png" rel="icon" type="image/x-icon">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-blue px-2">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="/" aria-label="CNDP">
    <img src="/assets/images/CNDP_logo_tiny.png" alt="CNDP">
  </a>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <div class="navbar-nav mr-auto">
      <a class="nav-link header-link" href="/blog/">Blog</a>
      <a class="nav-link header-link" href="/community/">Community</a>
      <a class="nav-link header-link" href="/dev/">Development</a>
      <a class="nav-link header-link" href="/doc/">Documentation</a>
    </div>
    <div class="navbar-nav ms-auto me-3">
      <a class="nav-link header-link" href="https://github.com/CloudNativeDataPlane/cndp">
        <svg xmlns="http://www.w3.org/2000/svg" class="navbar-nav-svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
      </a>
    </div>
  </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CNDP
   &#160;<span id="projectnumber">22.04.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('examples_2cndpfwd_2stats_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">examples/cndpfwd/stats.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2019-2022 Intel Corporation.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span>             <span class="comment">// for snprintf, fflush, NULL, stdout</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cne__common_8h.html">cne_common.h</a>&gt;</span>        <span class="comment">// for __cne_unused</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cne__log_8h.html">cne_log.h</a>&gt;</span>           <span class="comment">// for CNE_ERR_RET, CNE_LOG_ERR</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="metrics_8h.html">metrics.h</a>&gt;</span>           <span class="comment">// for metrics_append, metrics_register, metrics_cl...</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span>            <span class="comment">// for uint64_t</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span>            <span class="comment">// for gethostname</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cne__lport_8h.html">cne_lport.h</a>&gt;</span>        <span class="comment">// for lport_stats_t</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="jcfg_8h.html">jcfg.h</a>&gt;</span>             <span class="comment">// for jcfg_lport_t, jcfg_info_t, jcfg_lport_foreach</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;main.h&quot;</span>        <span class="comment">// for fwd_info, fwd_port, FWD_DEBUG_STATS, enable_...</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint64_t tick, print_stats_inited;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define COLUMN_WIDTH     20</span></div>
<div class="line"><span class="preprocessor">#define COLUMN_SEPARATOR &quot;-------------------&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> { YELLOW_TYPE = 1, MAGENTA_TYPE, CYAN_TYPE, RED_TYPE, GREEN_TYPE, BLUE_TYPE, ORANGE_TYPE };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">prt_cnt(<span class="keywordtype">int</span> skip, <span class="keywordtype">int</span> width, uint64_t cnt, <span class="keywordtype">int</span> type)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> buff[64];</div>
<div class="line"> </div>
<div class="line">    vt_cnright(skip);</div>
<div class="line">    snprintf(buff, <span class="keyword">sizeof</span>(buff), <span class="stringliteral">&quot;%&#39;lu&quot;</span>, cnt);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// clang-format off</span></div>
<div class="line">    <span class="keywordflow">switch</span>(type) {</div>
<div class="line">    <span class="keywordflow">case</span> YELLOW_TYPE:   <a name="a0"></a><a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[yellow]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> MAGENTA_TYPE:  <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[magenta]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> CYAN_TYPE:     <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[cyan]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> RED_TYPE:      <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[red]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> GREEN_TYPE:    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[green]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> BLUE_TYPE:     <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[blue]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> ORANGE_TYPE:   <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[orange]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:            <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[orange]%*s [yellow]|\n&quot;</span>, width, buff); <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// clang-format on</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">print_port_stats(<span class="keywordtype">int</span> lport_id, <span class="keyword">struct</span> fwd_port *p, <span class="keyword">struct</span> fwd_info *fwd)</div>
<div class="line">{</div>
<div class="line">    lport_stats_t stats = {0};</div>
<div class="line">    uint64_t rx_pps, tx_pps;</div>
<div class="line">    uint64_t acl_permit_pps, acl_deny_pps, acl_prefilter_pps;</div>
<div class="line">    <span class="keywordtype">int</span> skip, col;</div>
<div class="line"> </div>
<div class="line">    vt_restore();</div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    col  = COLUMN_WIDTH;</div>
<div class="line">    skip = (lport_id + 1) * (col + 2);</div>
<div class="line">    vt_cnright(skip);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[cyan]%*d[] [yellow]|[]\n&quot;</span>, col, lport_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (fwd-&gt;pkt_api) {</div>
<div class="line">    <span class="keywordflow">case</span> XSKDEV_PKT_API:</div>
<div class="line">        (void)<a name="a1"></a><a class="code" href="xskdev_8h.html#a7f3285dc918c4ab9aa4346401089b558">xskdev_stats_get</a>(p-&gt;xsk, &amp;stats);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> PKTDEV_PKT_API:</div>
<div class="line">        (void)<a name="a2"></a><a class="code" href="pktdev__api_8h.html#aa0d0bda65f9f4e73f50b6cc3b58f3cc3">pktdev_stats_get</a>(p-&gt;lport, &amp;stats);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    rx_pps            = (stats.ipackets - p-&gt;ipackets);</div>
<div class="line">    tx_pps            = (stats.opackets - p-&gt;opackets);</div>
<div class="line">    acl_permit_pps    = (p-&gt;acl_stats.acl_permit - p-&gt;prev_acl_stats.acl_permit);</div>
<div class="line">    acl_deny_pps      = (p-&gt;acl_stats.acl_deny - p-&gt;prev_acl_stats.acl_deny);</div>
<div class="line">    acl_prefilter_pps = (p-&gt;acl_stats.acl_prefilter_drop - p-&gt;prev_acl_stats.acl_prefilter_drop);</div>
<div class="line"> </div>
<div class="line">    vt_cnright(skip);</div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[yellow]%*s [yellow]+[]\n&quot;</span>, col, COLUMN_SEPARATOR);</div>
<div class="line"> </div>
<div class="line">    prt_cnt(skip, col, rx_pps, YELLOW_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.ipackets, MAGENTA_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.ibytes / (1024 * 1024), CYAN_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.ierrors, RED_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.imissed, RED_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.rx_invalid, RED_TYPE);</div>
<div class="line"> </div>
<div class="line">    prt_cnt(skip, col, tx_pps, YELLOW_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.opackets, MAGENTA_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.obytes / (1024 * 1024), CYAN_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.oerrors, RED_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.odropped, CYAN_TYPE);</div>
<div class="line">    prt_cnt(skip, col, stats.tx_invalid, RED_TYPE);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (fwd-&gt;flags &amp; FWD_ACL_STATS) {</div>
<div class="line">        prt_cnt(skip, col, acl_prefilter_pps, YELLOW_TYPE);</div>
<div class="line">        prt_cnt(skip, col, p-&gt;acl_stats.acl_prefilter_drop, MAGENTA_TYPE);</div>
<div class="line"> </div>
<div class="line">        prt_cnt(skip, col, acl_permit_pps, YELLOW_TYPE);</div>
<div class="line">        prt_cnt(skip, col, p-&gt;acl_stats.acl_permit, MAGENTA_TYPE);</div>
<div class="line"> </div>
<div class="line">        prt_cnt(skip, col, acl_deny_pps, YELLOW_TYPE);</div>
<div class="line">        prt_cnt(skip, col, p-&gt;acl_stats.acl_deny, MAGENTA_TYPE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (fwd-&gt;flags &amp; FWD_DEBUG_STATS) {</div>
<div class="line">        vt_cnright(skip);</div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[yellow]%*s [yellow]+[]\n&quot;</span>, col, COLUMN_SEPARATOR);</div>
<div class="line"> </div>
<div class="line">        prt_cnt(skip, col, stats.rx_ring_empty, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.rx_buf_alloc, MAGENTA_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.rx_busypoll_wakeup, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.rx_poll_wakeup, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.rx_rcvd_count, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.rx_burst_called, CYAN_TYPE);</div>
<div class="line"> </div>
<div class="line">        prt_cnt(skip, col, stats.fq_add_count, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.fq_alloc_failed, RED_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.fq_buf_freed, CYAN_TYPE);</div>
<div class="line"> </div>
<div class="line">        prt_cnt(skip, col, stats.tx_kicks, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.tx_kick_failed, RED_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.tx_kick_again, RED_TYPE);</div>
<div class="line">        prt_cnt(skip, col, p-&gt;tx_overrun, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.tx_ring_full, CYAN_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.tx_copied, CYAN_TYPE);</div>
<div class="line"> </div>
<div class="line">        prt_cnt(skip, col, stats.cq_empty, MAGENTA_TYPE);</div>
<div class="line">        prt_cnt(skip, col, stats.cq_buf_freed, MAGENTA_TYPE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p-&gt;ipackets                          = stats.ipackets;</div>
<div class="line">    p-&gt;opackets                          = stats.opackets;</div>
<div class="line">    p-&gt;prev_acl_stats.acl_prefilter_drop = p-&gt;acl_stats.acl_prefilter_drop;</div>
<div class="line">    p-&gt;prev_acl_stats.acl_permit         = p-&gt;acl_stats.acl_permit;</div>
<div class="line">    p-&gt;prev_acl_stats.acl_deny           = p-&gt;acl_stats.acl_deny;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">_print_stats(<a name="_a3"></a><a class="code" href="structjcfg__info__s.html">jcfg_info_t</a> *j <a name="a4"></a><a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> idx <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <a name="_a5"></a><a class="code" href="structjcfg__lport.html">jcfg_lport_t</a> *lport  = obj;</div>
<div class="line">    <span class="keyword">struct </span>fwd_port *pd  = lport-&gt;priv_;</div>
<div class="line">    <span class="keyword">struct </span>fwd_info *fwd = (<span class="keyword">struct </span>fwd_info *)arg;</div>
<div class="line"> </div>
<div class="line">    print_port_stats(lport-&gt;<a name="a6"></a><a class="code" href="structjcfg__lport.html#a9e80a18e17fc4c6a3e11c46abcf1c8ff">lpid</a>, pd, fwd);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">    DFLT_LINE,</div>
<div class="line">    TICK_LINE,</div>
<div class="line">    COL_LINE,</div>
<div class="line">    HDR_LINE,</div>
<div class="line">    ACL_LINE  = 0x100,</div>
<div class="line">    DBG_LINE  = 0x80,</div>
<div class="line">    LINE_MASK = 0x7f</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>stats_line {</div>
<div class="line">    <span class="keywordtype">int</span> type;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *msg;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *hdr;</div>
<div class="line">} stat_lines[] = {</div>
<div class="line">    {DFLT_LINE, <span class="stringliteral">&quot;\n&quot;</span>},</div>
<div class="line">    {TICK_LINE, <span class="stringliteral">&quot;[cyan:-:italic]Running:  [yellow:-:bold]%c[]\n&quot;</span>, <span class="stringliteral">&quot;&quot;</span>},</div>
<div class="line"> </div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[cyan:-:bold]%-*s [yellow:-:-]|[]\n&quot;</span>, <span class="stringliteral">&quot;lport ID&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[yellow]%-*s [yellow]+[]\n&quot;</span>, COLUMN_SEPARATOR},</div>
<div class="line">    {HDR_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [green:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Pkts/s&quot;</span>, <span class="stringliteral">&quot;RX&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Total Pkts&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Total MBs&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Errors&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Missed&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Invalid&quot;</span>},</div>
<div class="line">    {HDR_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [green:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Pkts/s&quot;</span>, <span class="stringliteral">&quot;TX&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Total Pkts&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Total MBs&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Errors&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Dropped&quot;</span>},</div>
<div class="line">    {COL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Invalid&quot;</span>},</div>
<div class="line"> </div>
<div class="line">    {HDR_LINE | ACL_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [green:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Pkts/s&quot;</span>,</div>
<div class="line">     <span class="stringliteral">&quot;ACL Drop&quot;</span>},</div>
<div class="line">    {COL_LINE | ACL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Total Pkts&quot;</span>, NULL},</div>
<div class="line">    {HDR_LINE | ACL_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [green:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Pkts/s&quot;</span>,</div>
<div class="line">     <span class="stringliteral">&quot;ACL Permit&quot;</span>},</div>
<div class="line">    {COL_LINE | ACL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Total Pkts&quot;</span>, NULL},</div>
<div class="line">    {HDR_LINE | ACL_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [green:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Pkts/s&quot;</span>,</div>
<div class="line">     <span class="stringliteral">&quot;ACL Deny&quot;</span>},</div>
<div class="line">    {COL_LINE | ACL_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Total Pkts&quot;</span>, NULL},</div>
<div class="line"> </div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[magenta:-:italic]%-*s [yellow:-:-]+ []\n&quot;</span>, <span class="stringliteral">&quot;Debug Stats&quot;</span>},</div>
<div class="line">    {HDR_LINE | DBG_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [cyan:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Ring Empty&quot;</span>, <span class="stringliteral">&quot;RX&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Buf Alloc&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Call Busypoll&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Call Poll&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Rcvd Count&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Burst Called&quot;</span>},</div>
<div class="line"> </div>
<div class="line">    {HDR_LINE | DBG_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [cyan:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Added&quot;</span>, <span class="stringliteral">&quot;FQ&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Alloc Failed&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Buf Freed&quot;</span>},</div>
<div class="line"> </div>
<div class="line">    {HDR_LINE | DBG_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [cyan:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Kicks&quot;</span>, <span class="stringliteral">&quot;TX&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Kicks Failed&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Kicks again&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Ring Full&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Overrun&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Copied&quot;</span>},</div>
<div class="line">    {HDR_LINE | DBG_LINE, <span class="stringliteral">&quot;[yellow:-:italic]%-*s [cyan:-:-]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;Empty&quot;</span>, <span class="stringliteral">&quot;CQ&quot;</span>},</div>
<div class="line">    {COL_LINE | DBG_LINE, <span class="stringliteral">&quot;[green]%-*s [yellow]|[]\n&quot;</span>, <span class="stringliteral">&quot;   Buf Freed&quot;</span>},</div>
<div class="line">    {DFLT_LINE, <span class="stringliteral">&quot;[]\n&quot;</span>}};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">print_stats_init(<span class="keyword">struct</span> fwd_info *fwd)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> nlines = 0;</div>
<div class="line"> </div>
<div class="line">    print_stats_inited = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; cne_countof(stat_lines); i++) {</div>
<div class="line">        <span class="keyword">struct </span>stats_line *st = &amp;stat_lines[i];</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Skip the extra debug stats lines */</span></div>
<div class="line">        <span class="keywordflow">if</span> (!(fwd-&gt;flags &amp; FWD_DEBUG_STATS) &amp;&amp; (st-&gt;type &amp; DBG_LINE))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Skip the extra ACL stats lines */</span></div>
<div class="line">        <span class="keywordflow">if</span> (!(fwd-&gt;flags &amp; FWD_ACL_STATS) &amp;&amp; (st-&gt;type &amp; ACL_LINE))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        nlines++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    vt_make_space(nlines);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#pragma GCC diagnostic push</span></div>
<div class="line"><span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wformat-nonliteral&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">print_port_stats_all(<span class="keyword">struct</span> fwd_info *fwd)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> col = COLUMN_WIDTH;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!print_stats_inited)</div>
<div class="line">        print_stats_init(fwd);</div>
<div class="line"> </div>
<div class="line">    vt_save();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; cne_countof(stat_lines); i++) {</div>
<div class="line">        <span class="keyword">struct </span>stats_line *st = &amp;stat_lines[i];</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hdrlen;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Skip the extra debug stats lines */</span></div>
<div class="line">        <span class="keywordflow">if</span> (!(fwd-&gt;flags &amp; FWD_DEBUG_STATS) &amp;&amp; (st-&gt;type &amp; DBG_LINE))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* skip ACL lines */</span></div>
<div class="line">        <span class="keywordflow">if</span> (!(fwd-&gt;flags &amp; FWD_ACL_STATS) &amp;&amp; (st-&gt;type &amp; ACL_LINE))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (st-&gt;type &amp; LINE_MASK) {</div>
<div class="line">        <span class="keywordflow">case</span> DFLT_LINE:</div>
<div class="line">            <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(st-&gt;fmt, st-&gt;msg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> TICK_LINE:</div>
<div class="line">            <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(st-&gt;fmt, <span class="stringliteral">&quot;|/-\\&quot;</span>[tick % 4]);</div>
<div class="line">            tick++;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> COL_LINE:</div>
<div class="line">            <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(st-&gt;fmt, col, st-&gt;msg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> HDR_LINE:</div>
<div class="line">            hdrlen = strlen(st-&gt;hdr);</div>
<div class="line">            <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(st-&gt;fmt, hdrlen, st-&gt;hdr, col - hdrlen - 1, st-&gt;msg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> DBG_LINE:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    jcfg_lport_foreach(fwd-&gt;jinfo, _print_stats, fwd);</div>
<div class="line"> </div>
<div class="line">    vt_restore();</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#pragma GCC diagnostic pop</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">fwd_host(metrics_client_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *params <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> hostname[256];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (gethostname(hostname, <span class="keyword">sizeof</span>(hostname)) &lt; 0)</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <a name="a7"></a><a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;\&quot;hostname\&quot;:\&quot;%s\&quot;&quot;</span>, hostname);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">fwd_app(metrics_client_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *params <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;\&quot;name\&quot;:\&quot;cndpfwd\&quot;&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">handle_stats(<a class="code" href="structjcfg__info__s.html">jcfg_info_t</a> *j <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">int</span> idx <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structjcfg__lport.html">jcfg_lport_t</a> *lport  = obj;</div>
<div class="line">    <span class="keyword">struct </span>fwd_port *pd  = lport-&gt;priv_;</div>
<div class="line">    lport_stats_t stats  = {0};</div>
<div class="line">    metrics_client_t *c  = arg;</div>
<div class="line">    <span class="keyword">struct </span>fwd_info *fwd = (<span class="keyword">struct </span>fwd_info *)(c-&gt;info-&gt;priv);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (fwd-&gt;pkt_api) {</div>
<div class="line">    <span class="keywordflow">case</span> XSKDEV_PKT_API:</div>
<div class="line">        <a class="code" href="xskdev_8h.html#a7f3285dc918c4ab9aa4346401089b558">xskdev_stats_get</a>(pd-&gt;xsk, &amp;stats);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> PKTDEV_PKT_API:</div>
<div class="line">        <a class="code" href="pktdev__api_8h.html#aa0d0bda65f9f4e73f50b6cc3b58f3cc3">pktdev_stats_get</a>(pd-&gt;lport, &amp;stats);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (lport-&gt;<a class="code" href="structjcfg__lport.html#a9e80a18e17fc4c6a3e11c46abcf1c8ff">lpid</a> &gt; 0)</div>
<div class="line">        <a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a8"></a><a class="code" href="metrics_8h.html#a24786a02131448a9858e3f0afb226478">metrics_port_stats</a>(c, lport-&gt;name, &amp;stats) &lt; 0)</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* only publish ACL-related stats in one of the ACL modes */</span></div>
<div class="line">    <span class="keywordflow">if</span> (fwd-&gt;flags &amp; FWD_ACL_STATS) {</div>
<div class="line">        <a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;,\&quot;%s_n_acl_prefilter_drop_packets\&quot;:%ld&quot;</span>, lport-&gt;name,</div>
<div class="line">                       pd-&gt;acl_stats.acl_prefilter_drop);</div>
<div class="line">        <a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;,\&quot;%s_n_acl_permit_packets\&quot;:%ld&quot;</span>, lport-&gt;name,</div>
<div class="line">                       pd-&gt;acl_stats.acl_permit);</div>
<div class="line">        <a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;,\&quot;%s_n_acl_deny_packets\&quot;:%ld&quot;</span>, lport-&gt;name, pd-&gt;acl_stats.acl_deny);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">fwd_stats(metrics_client_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *params <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>fwd_info *fwd = (<span class="keyword">struct </span>fwd_info *)(c-&gt;info-&gt;priv);</div>
<div class="line">    <span class="keywordflow">return</span> jcfg_lport_foreach(fwd-&gt;jinfo, handle_stats, c);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">enable_metrics(<span class="keyword">struct</span> fwd_info *fwd)</div>
<div class="line">{</div>
<div class="line">    print_stats_inited = 0;</div>
<div class="line">    tick               = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a9"></a><a class="code" href="metrics_8h.html#a3bfe8011926265bcf363db1dcb93d405">metrics_init</a>((<span class="keywordtype">void</span> *)fwd) &lt; 0)</div>
<div class="line">        <a name="a10"></a><a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;metrics failed to initialize: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a11"></a><a class="code" href="metrics_8h.html#aabdf3f9dc1683d97a1ecaa08341acef1">metrics_register</a>(<span class="stringliteral">&quot;/port_stats&quot;</span>, fwd_stats) &lt; 0)</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register the metric stats\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">handle_thread(<a class="code" href="structjcfg__info__s.html">jcfg_info_t</a> *j <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> idx)</div>
<div class="line">{</div>
<div class="line">    <a name="_a12"></a><a class="code" href="structjcfg__thd.html">jcfg_thd_t</a> *thread = obj;</div>
<div class="line">    uds_client_t *c    = arg;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (idx &gt; 0)</div>
<div class="line">        <a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a name="a13"></a><a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;{&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* JSON is unsorted, so if we want order, we need to provide id&#39;s */</span></div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;id\&quot;:%d,&quot;</span>, thread-&gt;<a name="a14"></a><a class="code" href="structjcfg__thd.html#a3621634c7d41edf167a313cdfe0648b6">idx</a>);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;name\&quot;:\&quot;%s\&quot;,&quot;</span>, thread-&gt;name);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;group\&quot;:\&quot;%s\&quot;,&quot;</span>, thread-&gt;<a name="a15"></a><a class="code" href="structjcfg__thd.html#af79ba313643b1c6e634d705221930b84">group_name</a>);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;type\&quot;:\&quot;%s\&quot;,&quot;</span>, thread-&gt;<a name="a16"></a><a class="code" href="structjcfg__thd.html#a964ece8138f1339f5a2e693190111fed">thread_type</a>);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;ports\&quot;:[&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; thread-&gt;<a name="a17"></a><a class="code" href="structjcfg__thd.html#a91fbaa74988c83e02adba32eba8bdecd">lport_cnt</a>; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (i &gt; 0)</div>
<div class="line">            <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line">        <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;%s\&quot;&quot;</span>, thread-&gt;<a name="a18"></a><a class="code" href="structjcfg__thd.html#a8687369c18c90926a038e3a15d1ea3e6">lport_names</a>[i]);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">handle_port(<a class="code" href="structjcfg__info__s.html">jcfg_info_t</a> *j <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> idx)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structjcfg__lport.html">jcfg_lport_t</a> *lport = obj;</div>
<div class="line">    uds_client_t *c     = arg;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (idx &gt; 0)</div>
<div class="line">        <a class="code" href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a>(c, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;{&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* JSON is unsorted, so if we want order, we need to provide id&#39;s */</span></div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;id\&quot;:%d,&quot;</span>, lport-&gt;<a class="code" href="structjcfg__lport.html#a9e80a18e17fc4c6a3e11c46abcf1c8ff">lpid</a>);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;name\&quot;:\&quot;%s\&quot;,&quot;</span>, lport-&gt;name);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;netdev\&quot;:\&quot;%s\&quot;,&quot;</span>, lport-&gt;<a name="a19"></a><a class="code" href="structjcfg__lport.html#aaa44cfd991dfd49435b9e98988ff2580">netdev</a>);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;qid\&quot;:%d,&quot;</span>, lport-&gt;<a name="a20"></a><a class="code" href="structjcfg__lport.html#af1a904eea044da920254226da21ce37b">qid</a>);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;pmd_name\&quot;:\&quot;%s\&quot;&quot;</span>, lport-&gt;<a name="a21"></a><a class="code" href="structjcfg__lport.html#ace02cbb931375d6cb914c32195e05e6f">pmd_name</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">fwd_threads(uds_client_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *params <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keyword">struct </span>fwd_info *fwd = (<span class="keyword">struct </span>fwd_info *)(c-&gt;info-&gt;priv);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;threads\&quot;:[&quot;</span>);</div>
<div class="line">    ret = jcfg_thread_foreach(fwd-&gt;jinfo, handle_thread, c);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">fwd_ports(uds_client_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *params <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keyword">struct </span>fwd_info *fwd = (<span class="keyword">struct </span>fwd_info *)(c-&gt;info-&gt;priv);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;ports\&quot;:[&quot;</span>);</div>
<div class="line">    ret = jcfg_lport_foreach(fwd-&gt;jinfo, handle_port, c);</div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>thread_arg {</div>
<div class="line">    uds_client_t *client;</div>
<div class="line">    <span class="keywordtype">bool</span> pause;</div>
<div class="line">    <span class="keywordtype">bool</span> first;</div>
<div class="line">};</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">pause_thread(<a class="code" href="structjcfg__info__s.html">jcfg_info_t</a> *j <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> idx <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structjcfg__thd.html">jcfg_thd_t</a> *thd       = obj;</div>
<div class="line">    <span class="keyword">struct </span>thread_arg *ta = arg;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* don&#39;t try to pause main thread */</span></div>
<div class="line">    <span class="keywordflow">if</span> (strcasecmp(thd-&gt;<a class="code" href="structjcfg__thd.html#a964ece8138f1339f5a2e693190111fed">thread_type</a>, <span class="stringliteral">&quot;main&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    thd-&gt;<a name="a22"></a><a class="code" href="structjcfg__thd.html#ae403285ea303dd26759cbfb5f18404f1">pause</a> = ta-&gt;pause;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!ta-&gt;first)</div>
<div class="line">        <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(ta-&gt;client, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line">    ta-&gt;first = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(ta-&gt;client, <span class="stringliteral">&quot;{\&quot;name\&quot;:\&quot;%s\&quot;,\&quot;status\&quot;:\&quot;%s\&quot;}&quot;</span>, thd-&gt;name,</div>
<div class="line">               ta-&gt;pause ? <span class="stringliteral">&quot;paused&quot;</span> : <span class="stringliteral">&quot;running&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">fwd_thread_ctl(uds_client_t *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd, <span class="keyword">const</span> <span class="keywordtype">char</span> *params)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>thread_arg ta;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keyword">struct </span>fwd_info *fwd = (<span class="keyword">struct </span>fwd_info *)(c-&gt;info-&gt;priv);</div>
<div class="line"> </div>
<div class="line">    ta.client = c;</div>
<div class="line">    ta.first  = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* both commands require a parameter */</span></div>
<div class="line">    <span class="keywordflow">if</span> (params == NULL) {</div>
<div class="line">        <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;error\&quot;:\&quot;Command requires thread name (or &#39;all&#39;) as a parameter\&quot;&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcasecmp(cmd, <span class="stringliteral">&quot;/start&quot;</span>) == 0) {</div>
<div class="line">        ta.pause = <span class="keyword">false</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(cmd, <span class="stringliteral">&quot;/stop&quot;</span>) == 0) {</div>
<div class="line">        ta.pause = <span class="keyword">true</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* should not ever happen */</span></div>
<div class="line">        CNE_ASSERT(0);</div>
<div class="line">        <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;error\&quot;:\&quot;Invalid command\&quot;&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* do we want to touch all threads or just a particular one? */</span></div>
<div class="line">    <span class="keywordflow">if</span> (strcasecmp(params, <span class="stringliteral">&quot;all&quot;</span>) == 0) {</div>
<div class="line">        <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;threads\&quot;:[&quot;</span>);</div>
<div class="line">        ret = jcfg_thread_foreach(fwd-&gt;jinfo, pause_thread, &amp;ta);</div>
<div class="line">        <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* find a thread with requested name */</span></div>
<div class="line">        <a class="code" href="structjcfg__thd.html">jcfg_thd_t</a> *thd = jcfg_lookup_thread(fwd-&gt;jinfo, params);</div>
<div class="line">        <span class="keywordflow">if</span> (thd != NULL) {</div>
<div class="line">            <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;threads\&quot;:[&quot;</span>);</div>
<div class="line">            ret = pause_thread(fwd-&gt;jinfo, thd, &amp;ta, 0);</div>
<div class="line">            <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            ret = 0;</div>
<div class="line">            <a class="code" href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a>(c, <span class="stringliteral">&quot;\&quot;error\&quot;:\&quot;Thread &#39;%s&#39; not found\&quot;&quot;</span>, params);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">enable_uds_info(<span class="keyword">struct</span> fwd_info *fwd)</div>
<div class="line">{</div>
<div class="line">    uds_info_t *info = <a name="a23"></a><a class="code" href="uds_8h.html#a37ead71fc3240f2952999dc209443302">uds_get_default</a>(fwd);</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="uds_8h.html#a3796c78eca2f5581b5712af0d8978081">uds_group_t</a> *app_grp;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (info == NULL)</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;UDS failed to initialize: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">    app_grp = <a name="a24"></a><a class="code" href="uds_8h.html#a87e1170344d93695af5740d30a4a5256">uds_create_group</a>(info, <span class="stringliteral">&quot;app&quot;</span>, (<span class="keywordtype">void</span> *)fwd);</div>
<div class="line">    <span class="keywordflow">if</span> (app_grp == NULL)</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;UDS &#39;app&#39; group create failed: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a25"></a><a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(app_grp, <span class="stringliteral">&quot;/hostname&quot;</span>, fwd_host) &lt; 0)</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register the metrics host\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(app_grp, <span class="stringliteral">&quot;/appname&quot;</span>, fwd_app) &lt; 0)</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register the metrics app\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(app_grp, <span class="stringliteral">&quot;/threads&quot;</span>, fwd_threads))</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register threads command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(app_grp, <span class="stringliteral">&quot;/ports&quot;</span>, fwd_ports))</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register ports command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(app_grp, <span class="stringliteral">&quot;/stop&quot;</span>, fwd_thread_ctl))</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register stop command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(app_grp, <span class="stringliteral">&quot;/start&quot;</span>, fwd_thread_ctl))</div>
<div class="line">        <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register start command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (fwd-&gt;test == ACL_STRICT_TEST || fwd-&gt;test == ACL_PERMISSIVE_TEST) {</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="uds_8h.html#a3796c78eca2f5581b5712af0d8978081">uds_group_t</a> *acl_grp;</div>
<div class="line"> </div>
<div class="line">        acl_grp = <a class="code" href="uds_8h.html#a87e1170344d93695af5740d30a4a5256">uds_create_group</a>(info, <span class="stringliteral">&quot;acl&quot;</span>, NULL);</div>
<div class="line">        <span class="keywordflow">if</span> (acl_grp == NULL)</div>
<div class="line">            <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;UDS &#39;acl&#39; group create failed: %s\n&quot;</span>, strerror(errno));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(acl_grp, <span class="stringliteral">&quot;/clear&quot;</span>, fwd_acl_clear))</div>
<div class="line">            <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register ACL clear command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(acl_grp, <span class="stringliteral">&quot;/add&quot;</span>, fwd_acl_add_rule))</div>
<div class="line">            <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register ACL add rule command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(acl_grp, <span class="stringliteral">&quot;/build&quot;</span>, fwd_acl_build))</div>
<div class="line">            <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register ACL build command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a>(acl_grp, <span class="stringliteral">&quot;/rules&quot;</span>, fwd_acl_read))</div>
<div class="line">            <a class="code" href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a>(<span class="stringliteral">&quot;Failed to register ACL rules command: %s\n&quot;</span>, strerror(errno));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="acne__common_8h_html"><div class="ttname"><a href="cne__common_8h.html">cne_common.h</a></div></div>
<div class="ttc" id="acne__common_8h_html_a110ce74779a3879ca9ba9167c968cf27"><div class="ttname"><a href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a></div><div class="ttdeci">#define __cne_unused</div><div class="ttdef"><b>Definition:</b> <a href="cne__common_8h_source.html#l00144">cne_common.h:144</a></div></div>
<div class="ttc" id="acne__log_8h_html"><div class="ttname"><a href="cne__log_8h.html">cne_log.h</a></div></div>
<div class="ttc" id="acne__log_8h_html_ac8c38301b044c47cdcdffa35550bd524"><div class="ttname"><a href="cne__log_8h.html#ac8c38301b044c47cdcdffa35550bd524">CNE_ERR_RET</a></div><div class="ttdeci">#define CNE_ERR_RET(...)</div><div class="ttdef"><b>Definition:</b> <a href="cne__log_8h_source.html#l00223">cne_log.h:223</a></div></div>
<div class="ttc" id="acne__lport_8h_html"><div class="ttname"><a href="cne__lport_8h.html">cne_lport.h</a></div></div>
<div class="ttc" id="acne__stdio_8h_html_acb5e6a7e2a06a6e65de91e951186606d"><div class="ttname"><a href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a></div><div class="ttdeci">CNDP_API int cne_printf(const char *fmt,...)</div></div>
<div class="ttc" id="ajcfg_8h_html"><div class="ttname"><a href="jcfg_8h.html">jcfg.h</a></div></div>
<div class="ttc" id="ametrics_8h_html"><div class="ttname"><a href="metrics_8h.html">metrics.h</a></div></div>
<div class="ttc" id="ametrics_8h_html_a24786a02131448a9858e3f0afb226478"><div class="ttname"><a href="metrics_8h.html#a24786a02131448a9858e3f0afb226478">metrics_port_stats</a></div><div class="ttdeci">CNDP_API int metrics_port_stats(metrics_client_t *c, char *name, lport_stats_t *s)</div></div>
<div class="ttc" id="ametrics_8h_html_a3775ca9e50261d0a5f0ac2c09b0609aa"><div class="ttname"><a href="metrics_8h.html#a3775ca9e50261d0a5f0ac2c09b0609aa">metrics_append</a></div><div class="ttdeci">#define metrics_append(c, fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="metrics_8h_source.html#l00075">metrics.h:75</a></div></div>
<div class="ttc" id="ametrics_8h_html_a3bfe8011926265bcf363db1dcb93d405"><div class="ttname"><a href="metrics_8h.html#a3bfe8011926265bcf363db1dcb93d405">metrics_init</a></div><div class="ttdeci">CNDP_API int metrics_init(void *priv_)</div></div>
<div class="ttc" id="ametrics_8h_html_aabdf3f9dc1683d97a1ecaa08341acef1"><div class="ttname"><a href="metrics_8h.html#aabdf3f9dc1683d97a1ecaa08341acef1">metrics_register</a></div><div class="ttdeci">CNDP_API int metrics_register(const char *cmd, metrics_cb fn)</div></div>
<div class="ttc" id="apktdev__api_8h_html_aa0d0bda65f9f4e73f50b6cc3b58f3cc3"><div class="ttname"><a href="pktdev__api_8h.html#aa0d0bda65f9f4e73f50b6cc3b58f3cc3">pktdev_stats_get</a></div><div class="ttdeci">CNDP_API int pktdev_stats_get(uint16_t lport_id, lport_stats_t *stats)</div></div>
<div class="ttc" id="astructjcfg__info__s_html"><div class="ttname"><a href="structjcfg__info__s.html">jcfg_info_s</a></div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00337">jcfg.h:337</a></div></div>
<div class="ttc" id="astructjcfg__lport_html"><div class="ttname"><a href="structjcfg__lport.html">jcfg_lport</a></div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00170">jcfg.h:170</a></div></div>
<div class="ttc" id="astructjcfg__lport_html_a9e80a18e17fc4c6a3e11c46abcf1c8ff"><div class="ttname"><a href="structjcfg__lport.html#a9e80a18e17fc4c6a3e11c46abcf1c8ff">jcfg_lport::lpid</a></div><div class="ttdeci">uint16_t lpid</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00178">jcfg.h:178</a></div></div>
<div class="ttc" id="astructjcfg__lport_html_aaa44cfd991dfd49435b9e98988ff2580"><div class="ttname"><a href="structjcfg__lport.html#aaa44cfd991dfd49435b9e98988ff2580">jcfg_lport::netdev</a></div><div class="ttdeci">char * netdev</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00172">jcfg.h:172</a></div></div>
<div class="ttc" id="astructjcfg__lport_html_ace02cbb931375d6cb914c32195e05e6f"><div class="ttname"><a href="structjcfg__lport.html#ace02cbb931375d6cb914c32195e05e6f">jcfg_lport::pmd_name</a></div><div class="ttdeci">char * pmd_name</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00173">jcfg.h:173</a></div></div>
<div class="ttc" id="astructjcfg__lport_html_af1a904eea044da920254226da21ce37b"><div class="ttname"><a href="structjcfg__lport.html#af1a904eea044da920254226da21ce37b">jcfg_lport::qid</a></div><div class="ttdeci">uint16_t qid</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00179">jcfg.h:179</a></div></div>
<div class="ttc" id="astructjcfg__thd_html"><div class="ttname"><a href="structjcfg__thd.html">jcfg_thd</a></div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00212">jcfg.h:212</a></div></div>
<div class="ttc" id="astructjcfg__thd_html_a3621634c7d41edf167a313cdfe0648b6"><div class="ttname"><a href="structjcfg__thd.html#a3621634c7d41edf167a313cdfe0648b6">jcfg_thd::idx</a></div><div class="ttdeci">uint16_t idx</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00219">jcfg.h:219</a></div></div>
<div class="ttc" id="astructjcfg__thd_html_a8687369c18c90926a038e3a15d1ea3e6"><div class="ttname"><a href="structjcfg__thd.html#a8687369c18c90926a038e3a15d1ea3e6">jcfg_thd::lport_names</a></div><div class="ttdeci">char ** lport_names</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00220">jcfg.h:220</a></div></div>
<div class="ttc" id="astructjcfg__thd_html_a91fbaa74988c83e02adba32eba8bdecd"><div class="ttname"><a href="structjcfg__thd.html#a91fbaa74988c83e02adba32eba8bdecd">jcfg_thd::lport_cnt</a></div><div class="ttdeci">uint16_t lport_cnt</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00217">jcfg.h:217</a></div></div>
<div class="ttc" id="astructjcfg__thd_html_a964ece8138f1339f5a2e693190111fed"><div class="ttname"><a href="structjcfg__thd.html#a964ece8138f1339f5a2e693190111fed">jcfg_thd::thread_type</a></div><div class="ttdeci">char * thread_type</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00215">jcfg.h:215</a></div></div>
<div class="ttc" id="astructjcfg__thd_html_ae403285ea303dd26759cbfb5f18404f1"><div class="ttname"><a href="structjcfg__thd.html#ae403285ea303dd26759cbfb5f18404f1">jcfg_thd::pause</a></div><div class="ttdeci">volatile uint16_t pause</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00224">jcfg.h:224</a></div></div>
<div class="ttc" id="astructjcfg__thd_html_af79ba313643b1c6e634d705221930b84"><div class="ttname"><a href="structjcfg__thd.html#af79ba313643b1c6e634d705221930b84">jcfg_thd::group_name</a></div><div class="ttdeci">char * group_name</div><div class="ttdef"><b>Definition:</b> <a href="jcfg_8h_source.html#l00214">jcfg.h:214</a></div></div>
<div class="ttc" id="auds_8h_html_a3796c78eca2f5581b5712af0d8978081"><div class="ttname"><a href="uds_8h.html#a3796c78eca2f5581b5712af0d8978081">uds_group_t</a></div><div class="ttdeci">struct uds_group uds_group_t</div></div>
<div class="ttc" id="auds_8h_html_a37ead71fc3240f2952999dc209443302"><div class="ttname"><a href="uds_8h.html#a37ead71fc3240f2952999dc209443302">uds_get_default</a></div><div class="ttdeci">CNDP_API uds_info_t * uds_get_default(void *priv)</div></div>
<div class="ttc" id="auds_8h_html_a762d1ac4f504838931ea4208b3841033"><div class="ttname"><a href="uds_8h.html#a762d1ac4f504838931ea4208b3841033">uds_register</a></div><div class="ttdeci">CNDP_API int uds_register(const uds_group_t *grp, const char *cmd, uds_cb fn)</div></div>
<div class="ttc" id="auds_8h_html_a87e1170344d93695af5740d30a4a5256"><div class="ttname"><a href="uds_8h.html#a87e1170344d93695af5740d30a4a5256">uds_create_group</a></div><div class="ttdeci">CNDP_API const uds_group_t * uds_create_group(const uds_info_t *info, const char *group, void *priv)</div></div>
<div class="ttc" id="auds_8h_html_a99b1916a61869d864d8161815f7a4fc4"><div class="ttname"><a href="uds_8h.html#a99b1916a61869d864d8161815f7a4fc4">uds_append</a></div><div class="ttdeci">CNDP_API int uds_append(uds_client_t *client, const char *format,...)</div></div>
<div class="ttc" id="axskdev_8h_html_a7f3285dc918c4ab9aa4346401089b558"><div class="ttname"><a href="xskdev_8h.html#a7f3285dc918c4ab9aa4346401089b558">xskdev_stats_get</a></div><div class="ttdeci">CNDP_API int xskdev_stats_get(xskdev_info_t *xi, lport_stats_t *stats)</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
