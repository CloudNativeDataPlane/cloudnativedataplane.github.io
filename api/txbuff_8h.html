<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<!--<meta charset="utf-8">-->
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CNDP: lib/core/txbuff/txbuff.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/styles.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/custom_doxygen.css" rel="stylesheet" type="text/css" />
<link href="/assets/images/favicon.png" rel="icon" type="image/x-icon">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-blue px-2">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="/" aria-label="CNDP">
    <img src="/assets/images/CNDP_logo_tiny.png" alt="CNDP">
  </a>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <div class="navbar-nav mr-auto">
      <a class="nav-link header-link" href="/blog/">Blog</a>
      <a class="nav-link header-link" href="/community/">Community</a>
      <a class="nav-link header-link" href="/dev/">Development</a>
      <a class="nav-link header-link" href="/doc/">Documentation</a>
    </div>
    <div class="navbar-nav ms-auto me-3">
      <a class="nav-link header-link" href="https://github.com/CloudNativeDataPlane/cndp">
        <svg xmlns="http://www.w3.org/2000/svg" class="navbar-nav-svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
      </a>
    </div>
  </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CNDP
   &#160;<span id="projectnumber">22.08.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('txbuff_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">txbuff.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;<a class="el" href="cne__common_8h_source.html">cne_common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="pktmbuf_8h_source.html">pktmbuf.h</a>&gt;</code><br />
</div>
<p><a href="txbuff_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtxbuff.html">txbuff</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5ac32cb435812b7faa9563559a66be92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#a5ac32cb435812b7faa9563559a66be92">TXBUFF_SIZE</a>(sz)&#160;&#160;&#160;(sizeof(<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a>) + (sz) * sizeof(<a class="el" href="structpktmbuf__s.html">pktmbuf_t</a> *))</td></tr>
<tr class="separator:a5ac32cb435812b7faa9563559a66be92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a43da0e4dde65b9e947dc63899888044a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#a43da0e4dde65b9e947dc63899888044a">txbuff_error_fn</a>) (struct <a class="el" href="structtxbuff.html">txbuff</a> *buffer, uint16_t unsent, uint16_t sent)</td></tr>
<tr class="separator:a43da0e4dde65b9e947dc63899888044a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadbf12c5808bf214b0165f73ac04417a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtxbuff.html">txbuff</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a></td></tr>
<tr class="separator:aadbf12c5808bf214b0165f73ac04417a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a531c35e38ede3ea4e5ba5afb24b29493"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"></td></tr>
<tr class="separator:a531c35e38ede3ea4e5ba5afb24b29493"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a00b7cec3b813b4d7a2827e985093ba1b"><td class="memItemLeft" align="right" valign="top">CNDP_API <a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#a00b7cec3b813b4d7a2827e985093ba1b">txbuff_pktdev_create</a> (uint16_t size, <a class="el" href="txbuff_8h.html#a43da0e4dde65b9e947dc63899888044a">txbuff_error_fn</a> cbfn, void *cb_arg, uint16_t lport_id)</td></tr>
<tr class="separator:a00b7cec3b813b4d7a2827e985093ba1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada45a79108312587d7f04b3ef40ff239"><td class="memItemLeft" align="right" valign="top">CNDP_API <a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#ada45a79108312587d7f04b3ef40ff239">txbuff_xskdev_create</a> (uint16_t size, <a class="el" href="txbuff_8h.html#a43da0e4dde65b9e947dc63899888044a">txbuff_error_fn</a> cbfn, void *cb_arg, void *xinfo)</td></tr>
<tr class="separator:ada45a79108312587d7f04b3ef40ff239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b0b52baad73418cbc988b3bbb94b03"><td class="memItemLeft" align="right" valign="top">CNDP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#aa7b0b52baad73418cbc988b3bbb94b03">txbuff_free</a> (<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *buffer)</td></tr>
<tr class="separator:aa7b0b52baad73418cbc988b3bbb94b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd7aafdd9ef6422bd800d2b86a2f8ce"><td class="memItemLeft" align="right" valign="top">CNDP_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#abdd7aafdd9ef6422bd800d2b86a2f8ce">txbuff_set_err_callback</a> (<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *buffer, <a class="el" href="txbuff_8h.html#a43da0e4dde65b9e947dc63899888044a">txbuff_error_fn</a> callback, void *userdata)</td></tr>
<tr class="separator:abdd7aafdd9ef6422bd800d2b86a2f8ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a135d39659e4ca2fd2ba7ca5078e9e8fb"><td class="memItemLeft" align="right" valign="top">CNDP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#a135d39659e4ca2fd2ba7ca5078e9e8fb">txbuff_drop_callback</a> (<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *buffer, uint16_t sent, uint16_t unsent)</td></tr>
<tr class="separator:a135d39659e4ca2fd2ba7ca5078e9e8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a97ce9b72286c00fd289582b2c6098"><td class="memItemLeft" align="right" valign="top">CNDP_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#a76a97ce9b72286c00fd289582b2c6098">txbuff_count_callback</a> (<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *buffer, uint16_t sent, uint16_t unsent)</td></tr>
<tr class="separator:a76a97ce9b72286c00fd289582b2c6098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdf8f0e841815a554cfeb4c928442f7c"><td class="memItemLeft" align="right" valign="top">CNDP_API uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#afdf8f0e841815a554cfeb4c928442f7c">txbuff_flush</a> (<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *buffer)</td></tr>
<tr class="separator:afdf8f0e841815a554cfeb4c928442f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a508b33f57bfcbff9904711de80477a7e"><td class="memItemLeft" align="right" valign="top">CNDP_API uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#a508b33f57bfcbff9904711de80477a7e">txbuff_add</a> (<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *buffer, <a class="el" href="structpktmbuf__s.html">pktmbuf_t</a> *tx_pkt)</td></tr>
<tr class="separator:a508b33f57bfcbff9904711de80477a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8268b335e77a97f98b3091c73b09c7a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txbuff_8h.html#ad8268b335e77a97f98b3091c73b09c7a">txbuff_count</a> (<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *buffer)</td></tr>
<tr class="separator:ad8268b335e77a97f98b3091c73b09c7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Routines and structures to allow an application to send single mbufs or packets while enqueuing the packets to an array and flush the packets to the output port when the number of packets fills the array.</p>
<p>Using this method allows for buffered packet to be sent in bulk and not one at a time. </p>

<p class="definition">Definition in file <a class="el" href="txbuff_8h_source.html">txbuff.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5ac32cb435812b7faa9563559a66be92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ac32cb435812b7faa9563559a66be92">&#9670;&nbsp;</a></span>TXBUFF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TXBUFF_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sz</td><td>)</td>
          <td>&#160;&#160;&#160;(sizeof(<a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a>) + (sz) * sizeof(<a class="el" href="structpktmbuf__s.html">pktmbuf_t</a> *))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the size of the tx buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sz</td><td>Number of stored packets. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="txbuff_8h_source.html#l00069">69</a> of file <a class="el" href="txbuff_8h_source.html">txbuff.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a43da0e4dde65b9e947dc63899888044a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43da0e4dde65b9e947dc63899888044a">&#9670;&nbsp;</a></span>txbuff_error_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* txbuff_error_fn) (struct <a class="el" href="structtxbuff.html">txbuff</a> *buffer, uint16_t unsent, uint16_t sent)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Error callback function for txbuff sends.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The txbuff_t pointer. </td></tr>
    <tr><td class="paramname">unsent</td><td>The number of unsent packets on a flush call. </td></tr>
    <tr><td class="paramname">sent</td><td>The number of sent packets on a flush call. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="txbuff_8h_source.html#l00038">38</a> of file <a class="el" href="txbuff_8h_source.html">txbuff.h</a>.</p>

</div>
</div>
<a id="aadbf12c5808bf214b0165f73ac04417a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadbf12c5808bf214b0165f73ac04417a">&#9670;&nbsp;</a></span>txbuff_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtxbuff.html">txbuff</a> <a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Structure used to buffer packets for future TX Used by APIs txbuff_add and txbuff_flush </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a531c35e38ede3ea4e5ba5afb24b29493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531c35e38ede3ea4e5ba5afb24b29493">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Types of txbuff transmit routines </p>

<p class="definition">Definition at line <a class="el" href="txbuff_8h_source.html#l00061">61</a> of file <a class="el" href="txbuff_8h_source.html">txbuff.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a00b7cec3b813b4d7a2827e985093ba1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b7cec3b813b4d7a2827e985093ba1b">&#9670;&nbsp;</a></span>txbuff_pktdev_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API <a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a>* txbuff_pktdev_create </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#a43da0e4dde65b9e947dc63899888044a">txbuff_error_fn</a>&#160;</td>
          <td class="paramname"><em>cbfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cb_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>lport_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize default values for buffered transmitting and return txbuff pointer for pktdev</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Buffer size </td></tr>
    <tr><td class="paramname">cbfn</td><td>Callback on error function, if null use <a class="el" href="txbuff_8h.html#a135d39659e4ca2fd2ba7ca5078e9e8fb">txbuff_drop_callback()</a>. </td></tr>
    <tr><td class="paramname">cb_arg</td><td>Argument for callback function. </td></tr>
    <tr><td class="paramname">lport_id</td><td>The lport ID to be used with <a class="el" href="pktdev_8h.html#a8b02a8a5fa5d7f4ad8866c5960584337">pktdev_tx_burst()</a> call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL on error or pointer to structure txbuff </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2cndpfwd_2main_8c-example.html#a28">examples/cndpfwd/main.c</a>, and <a class="el" href="examples_2dlb_test_2dlb_test_8c-example.html#a7">examples/dlb_test/dlb_test.c</a>.</dd>
</dl>

</div>
</div>
<a id="ada45a79108312587d7f04b3ef40ff239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada45a79108312587d7f04b3ef40ff239">&#9670;&nbsp;</a></span>txbuff_xskdev_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API <a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a>* txbuff_xskdev_create </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#a43da0e4dde65b9e947dc63899888044a">txbuff_error_fn</a>&#160;</td>
          <td class="paramname"><em>cbfn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cb_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>xinfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize default values for buffered transmitting and return txbuff pointer for xskdev</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Buffer size </td></tr>
    <tr><td class="paramname">cbfn</td><td>Callback on error function, if null use <a class="el" href="txbuff_8h.html#a135d39659e4ca2fd2ba7ca5078e9e8fb">txbuff_drop_callback()</a>. </td></tr>
    <tr><td class="paramname">cb_arg</td><td>Argument for callback function. </td></tr>
    <tr><td class="paramname">xinfo</td><td>The xskdev info pointer, used with <a class="el" href="xskdev_8h.html#aa3a4f5889495e52230c3534195b043a1">xskdev_tx_burst()</a> function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL on error or pointer to structure txbuff </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2cndpfwd_2main_8c-example.html#a26">examples/cndpfwd/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="aa7b0b52baad73418cbc988b3bbb94b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b0b52baad73418cbc988b3bbb94b03">&#9670;&nbsp;</a></span>txbuff_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API void txbuff_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free memory (and any buffered packets) associated with a txbuff</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the txbuff structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2cndpfwd_2main_8c-example.html#a23">examples/cndpfwd/main.c</a>, and <a class="el" href="examples_2dlb_test_2dlb_test_8c-example.html#a3">examples/dlb_test/dlb_test.c</a>.</dd>
</dl>

</div>
</div>
<a id="abdd7aafdd9ef6422bd800d2b86a2f8ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd7aafdd9ef6422bd800d2b86a2f8ce">&#9670;&nbsp;</a></span>txbuff_set_err_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API int txbuff_set_err_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#a43da0e4dde65b9e947dc63899888044a">txbuff_error_fn</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure a callback for buffered packets which cannot be sent</p>
<p>Register a specific callback to be called when an attempt is made to send all packets buffered on an ethernet lport, but not all packets can successfully be sent. The callback registered here will be called only from calls to <a class="el" href="txbuff_8h.html#a508b33f57bfcbff9904711de80477a7e">txbuff_add()</a> and <a class="el" href="txbuff_8h.html#afdf8f0e841815a554cfeb4c928442f7c">txbuff_flush()</a> APIs. The callback configured by default just frees the packets back to the original mempool. If additional behaviour is required, for example, to count dropped packets, or to retry transmission of packets which cannot be sent, this function should be used to register a suitable callback function to implement the desired behaviour.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the txbuff structure </td></tr>
    <tr><td class="paramname">callback</td><td>The function to be used as the callback </td></tr>
    <tr><td class="paramname">userdata</td><td>Arbitrary parameter to be passed to the callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, or -1 on error </dd></dl>

</div>
</div>
<a id="a135d39659e4ca2fd2ba7ca5078e9e8fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a135d39659e4ca2fd2ba7ca5078e9e8fb">&#9670;&nbsp;</a></span>txbuff_drop_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API void txbuff_drop_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>unsent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback function for silently dropping unsent buffered packets.</p>
<p>This function can be passed to <a class="el" href="txbuff_8h.html#abdd7aafdd9ef6422bd800d2b86a2f8ce">txbuff_set_err_callback()</a> to adjust the default behavior when buffered packets cannot be sent. This function drops any unsent packets silently and is used by txbuff operations as default behavior.</p>
<p>NOTE: this function should not be called directly, instead it should be used as a callback for packet buffering.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the txbuff structure </td></tr>
    <tr><td class="paramname">sent</td><td>The number of sent packets in the pkts array </td></tr>
    <tr><td class="paramname">unsent</td><td>The number of unsent packets in the pkts array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a76a97ce9b72286c00fd289582b2c6098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a97ce9b72286c00fd289582b2c6098">&#9670;&nbsp;</a></span>txbuff_count_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API void txbuff_count_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>unsent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback function for counting unsent buffered packets.</p>
<p>This function can be passed to <a class="el" href="txbuff_8h.html#abdd7aafdd9ef6422bd800d2b86a2f8ce">txbuff_set_err_callback()</a> to adjust the default behavior when buffered packets cannot be sent. This function drops any unsent packets, but also updates a user-supplied counter to track the overall number of packets dropped. The counter should be an uint64_t variable.</p>
<p>NOTE: this function should not be called directly, instead it should be used as a callback for packet buffering.</p>
<p>NOTE: when configuring this function as a callback with <a class="el" href="txbuff_8h.html#abdd7aafdd9ef6422bd800d2b86a2f8ce">txbuff_set_err_callback()</a>, the final userdata parameter should point to an uint64_t value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the txbuff structure </td></tr>
    <tr><td class="paramname">sent</td><td>The number of sent packets in the pkts array </td></tr>
    <tr><td class="paramname">unsent</td><td>The number of unsent packets in the pkts array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2cndpfwd_2main_8c-example.html#a27">examples/cndpfwd/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="afdf8f0e841815a554cfeb4c928442f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdf8f0e841815a554cfeb4c928442f7c">&#9670;&nbsp;</a></span>txbuff_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API uint16_t txbuff_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send any packets queued up for transmission on a lport and HW queue</p>
<p>This causes an explicit flush of packets previously buffered via the <a class="el" href="txbuff_8h.html#a508b33f57bfcbff9904711de80477a7e">txbuff_add()</a> function. It returns the number of packets successfully sent to the NIC, and calls the error callback for any unsent packets. Unless explicitly set up otherwise, the default callback simply frees the unsent packets back to the original mempool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Buffer of packets to be transmit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of packets successfully sent to the Ethernet device. The error callback is called for any packets which could not be sent. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2cndpfwd_2acl-func_8c-example.html#a25">examples/cndpfwd/acl-func.c</a>, and <a class="el" href="examples_2cndpfwd_2main_8c-example.html#a15">examples/cndpfwd/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="a508b33f57bfcbff9904711de80477a7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a508b33f57bfcbff9904711de80477a7e">&#9670;&nbsp;</a></span>txbuff_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CNDP_API uint16_t txbuff_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpktmbuf__s.html">pktmbuf_t</a> *&#160;</td>
          <td class="paramname"><em>tx_pkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buffer a single packet for future transmission on a lport</p>
<p>This function takes a single mbuf/packet and buffers it for later transmission on the particular lport specified. Once the buffer is full of packets, an attempt will be made to transmit all the buffered packets. In case of error, where not all packets can be transmitted, a callback is called with the unsent packets as a parameter. If no callback is explicitly set up, the unsent packets are just freed back to the owning mempool. The function returns the number of packets actually sent i.e. 0 if no buffer flush occurred, otherwise the number of packets successfully flushed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Buffer used to collect packets to be sent. </td></tr>
    <tr><td class="paramname">tx_pkt</td><td>Pointer to the packet mbuf to be sent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 = packet has been buffered for later transmission or packets were flushed, but none were transmitted N &gt; 0 = packet has been buffered, and the buffer was subsequently flushed, causing N packets to be sent, and the error callback to be called for the rest. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2cndpfwd_2acl-func_8c-example.html#a22">examples/cndpfwd/acl-func.c</a>, <a class="el" href="examples_2cndpfwd_2main_8c-example.html#a12">examples/cndpfwd/main.c</a>, and <a class="el" href="examples_2dlb_test_2dlb_test_8c-example.html#a20">examples/dlb_test/dlb_test.c</a>.</dd>
</dl>

</div>
</div>
<a id="ad8268b335e77a97f98b3091c73b09c7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8268b335e77a97f98b3091c73b09c7a">&#9670;&nbsp;</a></span>txbuff_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int txbuff_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="txbuff_8h.html#aadbf12c5808bf214b0165f73ac04417a">txbuff_t</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of pkts in the txbuff list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The txbuff_t pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on buffer being NULL or the number of pkts in the list. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2cndpfwd_2acl-func_8c-example.html#a24">examples/cndpfwd/acl-func.c</a>, and <a class="el" href="examples_2cndpfwd_2main_8c-example.html#a14">examples/cndpfwd/main.c</a>.</dd>
</dl>

<p class="definition">Definition at line <a class="el" href="txbuff_8h_source.html#l00234">234</a> of file <a class="el" href="txbuff_8h_source.html">txbuff.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a2d5e495f4b604d04f57d90095a59dd6.html">core</a></li><li class="navelem"><a class="el" href="dir_088967f357fc0ef98b34e61190bb5c5f.html">txbuff</a></li><li class="navelem"><a class="el" href="txbuff_8h.html">txbuff.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
