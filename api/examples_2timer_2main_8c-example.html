<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<!--<meta charset="utf-8">-->
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CNDP: examples/timer/main.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/styles.css" rel="stylesheet" type="text/css" />
<link href="/assets/css/custom_doxygen.css" rel="stylesheet" type="text/css" />
<link href="/assets/images/favicon.png" rel="icon" type="image/x-icon">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-blue px-2">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="/" aria-label="CNDP">
    <img src="/assets/images/CNDP_logo_tiny.png" alt="CNDP">
  </a>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <div class="navbar-nav mr-auto">
      <a class="nav-link header-link" href="/blog/">Blog</a>
      <a class="nav-link header-link" href="/community/">Community</a>
      <a class="nav-link header-link" href="/dev/">Development</a>
      <a class="nav-link header-link" href="/doc/">Documentation</a>
    </div>
    <div class="navbar-nav ms-auto me-3">
      <a class="nav-link header-link" href="https://github.com/CloudNativeDataPlane/cndp">
        <svg xmlns="http://www.w3.org/2000/svg" class="navbar-nav-svg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
      </a>
    </div>
  </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CNDP
   &#160;<span id="projectnumber">22.04.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('examples_2timer_2main_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">examples/timer/main.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2020-2022 Intel Corporation</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span>             <span class="comment">// for NULL, snprintf</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span>            <span class="comment">// for uint64_t</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cne__common_8h.html">cne_common.h</a>&gt;</span>        <span class="comment">// for __cne_unused</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cne_8h.html">cne.h</a>&gt;</span>               <span class="comment">// for cne_id</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cne__timer_8h.html">cne_timer.h</a>&gt;</span>         <span class="comment">// for cne_timer_dump_stats, cne_timer_init, cne_ti...</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cli_8h.html">cli.h</a>&gt;</span>               <span class="comment">// for cli_path_string, cli_add_bin_path, cli_add_tree</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cne__cycles_8h.html">cne_cycles.h</a>&gt;</span>        <span class="comment">// for cne_rdtsc, cne_rdtsc_precise</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;main.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cne__system_8h.html">cne_system.h</a>&quot;</span>        <span class="comment">// for cne_get_timer_hz, cne_lcore_id</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cne__stdio_8h.html">cne_stdio.h</a>&quot;</span>         <span class="comment">// for cne_printf, cne_printf_pos</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="vt100__out_8h.html">vt100_out.h</a>&quot;</span>         <span class="comment">// for vt_cls</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> timer_stop;</div>
<div class="line"><span class="keyword">static</span> uint64_t timer_start;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">single_timer(<span class="keyword">struct</span> <a name="_a0"></a><a class="code" href="structcne__timer.html">cne_timer</a> *tim <a name="a1"></a><a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">void</span> *arg <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    uint64_t hz = <a name="a2"></a><a class="code" href="cne__system_8h.html#af0e5e66f54d3e1191b9f33dd8746a0b7">cne_get_timer_hz</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">double</span> timer_end = (double)(<a name="a3"></a><a class="code" href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a>() - timer_start);</div>
<div class="line">    <span class="keywordflow">if</span> (hz)</div>
<div class="line">        <a name="a4"></a><a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;Single timer fired in [green]%.2f[] seconds on thread %d\n\n&quot;</span>, timer_end / hz,</div>
<div class="line">                   <a name="a5"></a><a class="code" href="cne_8h.html#a0f9cdd535e00d18a2c8aa9a318ec7bec">cne_id</a>());</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;Single timer fired in [green]inf[] seconds on thread %d\n\n&quot;</span>, <a class="code" href="cne_8h.html#a0f9cdd535e00d18a2c8aa9a318ec7bec">cne_id</a>());</div>
<div class="line"> </div>
<div class="line">    timer_stop = 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">periodical_timer(<span class="keyword">struct</span> <a class="code" href="structcne__timer.html">cne_timer</a> *tim <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    uint64_t hz = <a class="code" href="cne__system_8h.html#af0e5e66f54d3e1191b9f33dd8746a0b7">cne_get_timer_hz</a>();</div>
<div class="line">    <span class="keywordtype">int</span> *count  = arg;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">double</span> timer_end = (double)(<a class="code" href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a>() - timer_start);</div>
<div class="line">    <span class="keywordflow">if</span> (hz)</div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;Periodical timer fired in [green]%.2f[] seconds on thread %d\n&quot;</span>, timer_end / hz,</div>
<div class="line">                   <a class="code" href="cne_8h.html#a0f9cdd535e00d18a2c8aa9a318ec7bec">cne_id</a>());</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;Periodical timer fired in [green]inf[] seconds on thread %d\n&quot;</span>, <a class="code" href="cne_8h.html#a0f9cdd535e00d18a2c8aa9a318ec7bec">cne_id</a>());</div>
<div class="line"> </div>
<div class="line">    timer_start = <a class="code" href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a>();</div>
<div class="line"> </div>
<div class="line">    (*count)++;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (*count &gt; 10)</div>
<div class="line">        timer_stop = 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">timer_cmd(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structcne__timer.html">cne_timer</a> tim0;</div>
<div class="line">    <span class="keywordtype">int</span> count;</div>
<div class="line"> </div>
<div class="line">    (void)argc;</div>
<div class="line">    (void)argv;</div>
<div class="line"> </div>
<div class="line">    <a name="a6"></a><a class="code" href="cne__timer_8h.html#a903fec48fbfdd8ffc852b63c90d4d7be">cne_timer_subsystem_init</a>();</div>
<div class="line"> </div>
<div class="line">    <a name="a7"></a><a class="code" href="cne__timer_8h.html#abca24cbe1db3da21efca35f6e07a8379">cne_timer_init</a>(&amp;tim0);</div>
<div class="line"> </div>
<div class="line">    <a name="a8"></a><a class="code" href="cne__timer_8h.html#a1b83e490659cb1f969d0d484f26f6b21">cne_timer_reset</a>(&amp;tim0, <a class="code" href="cne__system_8h.html#af0e5e66f54d3e1191b9f33dd8746a0b7">cne_get_timer_hz</a>() * 2, SINGLE, <a class="code" href="cne_8h.html#a0f9cdd535e00d18a2c8aa9a318ec7bec">cne_id</a>(), single_timer, NULL);</div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;\nSet a single use timer for 2 seconds\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    timer_stop  = 0;</div>
<div class="line">    timer_start = <a class="code" href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (timer_stop == 0) {</div>
<div class="line">        <a name="a9"></a><a class="code" href="cne__timer_8h.html#ad91cc6ba9dc8677cb64af35f7a9eacd7">cne_timer_manage</a>();</div>
<div class="line">    }</div>
<div class="line">    <a name="a10"></a><a class="code" href="cne__timer_8h.html#aecc14b761eaf02adedbc59ff6f182a2f">cne_timer_dump_stats</a>(NULL);</div>
<div class="line"> </div>
<div class="line">    <a name="a11"></a><a class="code" href="cne__timer_8h.html#a2d53f16541b4f76dfda1d84213ed2cc1">cne_timer_stop</a>(&amp;tim0);</div>
<div class="line">    <a class="code" href="cne__timer_8h.html#abca24cbe1db3da21efca35f6e07a8379">cne_timer_init</a>(&amp;tim0);</div>
<div class="line"> </div>
<div class="line">    count = 0;</div>
<div class="line">    <a class="code" href="cne__timer_8h.html#a1b83e490659cb1f969d0d484f26f6b21">cne_timer_reset</a>(&amp;tim0, <a class="code" href="cne__system_8h.html#af0e5e66f54d3e1191b9f33dd8746a0b7">cne_get_timer_hz</a>() / 2, PERIODICAL, <a class="code" href="cne_8h.html#a0f9cdd535e00d18a2c8aa9a318ec7bec">cne_id</a>(), periodical_timer, &amp;count);</div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;\nSet a periodical timer for every 1/2 second\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    timer_stop  = 0;</div>
<div class="line">    timer_start = <a class="code" href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (timer_stop == 0) {</div>
<div class="line">        <a class="code" href="cne__timer_8h.html#ad91cc6ba9dc8677cb64af35f7a9eacd7">cne_timer_manage</a>();</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    <a class="code" href="cne__timer_8h.html#aecc14b761eaf02adedbc59ff6f182a2f">cne_timer_dump_stats</a>(NULL);</div>
<div class="line">    <a class="code" href="cne__timer_8h.html#a2d53f16541b4f76dfda1d84213ed2cc1">cne_timer_stop</a>(&amp;tim0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">rdtsc_cmd(<span class="keywordtype">int</span> argc <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>, <span class="keywordtype">char</span> **argv <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    uint64_t count = 0, hz;</div>
<div class="line">    uint64_t tsc_start, tsc_end, delta;</div>
<div class="line"> </div>
<div class="line">    hz = <a class="code" href="cne__system_8h.html#af0e5e66f54d3e1191b9f33dd8746a0b7">cne_get_timer_hz</a>();</div>
<div class="line"> </div>
<div class="line">    tsc_start = <a class="code" href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a>();</div>
<div class="line">    tsc_end   = tsc_start + hz;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a>() &lt; tsc_end)</div>
<div class="line">        count++;</div>
<div class="line"> </div>
<div class="line">    delta = (tsc_end - tsc_start);</div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;TSC start [blue]%lu[] - end [blue]%lu[] = [red]%lu[]\n&quot;</span>, tsc_start, tsc_end, delta);</div>
<div class="line">    <span class="keywordflow">if</span> (count)</div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;   loop count: [green]%lu[] ([green]%lu[]) cycles\n&quot;</span>, count, delta / count);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;   loop count: [green]%lu[] ([green]inf[]) cycles\n&quot;</span>, count);</div>
<div class="line"> </div>
<div class="line">    count     = 0;</div>
<div class="line">    tsc_start = <a name="a12"></a><a class="code" href="cne__cycles_8h.html#a7577842240981525ae7aabc09b504da7">cne_rdtsc_precise</a>();</div>
<div class="line">    tsc_end   = tsc_start + hz;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="cne__cycles_8h.html#a7577842240981525ae7aabc09b504da7">cne_rdtsc_precise</a>() &lt; tsc_end)</div>
<div class="line">        count++;</div>
<div class="line"> </div>
<div class="line">    delta = (tsc_end - tsc_start);</div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;Precise TSC start [blue]%lu[] - end [blue]%lu[] = [red]%lu[]\n&quot;</span>, tsc_start, tsc_end,</div>
<div class="line">               delta);</div>
<div class="line">    <span class="keywordflow">if</span> (count)</div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;   loop count: [green]%lu[] ([green]%lu[]) cycles\n&quot;</span>, count, delta / count);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;   loop count: [green]%lu[] ([green]inf[]) cycles\n&quot;</span>, count);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// clang-format off</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span>cli_tree default_tree[] = {</div>
<div class="line">    <a name="a13"></a><a class="code" href="cli_8h.html#ac112cb168baf6a5196a1d653ff3b4215">c_dir</a>(<span class="stringliteral">&quot;/bin&quot;</span>),</div>
<div class="line"> </div>
<div class="line">    c_cmd(<span class="stringliteral">&quot;timer&quot;</span>, timer_cmd, <span class="stringliteral">&quot;Run a timer test&quot;</span>),</div>
<div class="line">    c_cmd(<span class="stringliteral">&quot;perf&quot;</span>,  rdtsc_cmd, <span class="stringliteral">&quot;Run a simple rdtsc performance test&quot;</span>),</div>
<div class="line"> </div>
<div class="line">    c_end()</div>
<div class="line">};</div>
<div class="line"><span class="comment">// clang-format on</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">init_tree(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Add the system default commands in /sbin directory */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a14"></a><a class="code" href="cli_8h.html#a4193ce843f261e135341e11f15855303">cli_default_tree_init</a>())</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Add the directory tree */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a15"></a><a class="code" href="cli_8h.html#a8fedcc7d2be1ed98cbd1963e6b1be0f5">cli_add_tree</a>(<a name="a16"></a><a class="code" href="cli_8h.html#a15f59cc70c25ca4987725bffc3513af6">cli_root_node</a>(), default_tree))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Make sure the txgen commands are executable in search path */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a17"></a><a class="code" href="cli_8h.html#a963a16e15423a2010c3ba7ad52d22aa5">cli_add_bin_path</a>(<span class="stringliteral">&quot;/bin&quot;</span>))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">my_prompt(<span class="keywordtype">int</span> cont <a class="code" href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> buff[256];</div>
<div class="line">    <span class="keywordtype">int</span> n;</div>
<div class="line"> </div>
<div class="line">    n = snprintf(buff, <span class="keyword">sizeof</span>(buff), <span class="stringliteral">&quot;cndp-cli:%s&gt; &quot;</span>, <a name="a18"></a><a class="code" href="cli_8h.html#a35aeed8da3ae396f19a01f8a3c7a5cf5">cli_path_string</a>(NULL, NULL));</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[green]cndp-cli:%s[]&gt; &quot;</span>, <a class="code" href="cli_8h.html#a35aeed8da3ae396f19a01f8a3c7a5cf5">cli_path_string</a>(NULL, NULL));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> n;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">setup_cli(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a19"></a><a class="code" href="cli_8h.html#a80526fe2f5840e0c2c4029158d61b2dd">cli_create</a>(NULL)) {</div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;cli_create() failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a20"></a><a class="code" href="cli_8h.html#a6624b815bb1ad7daa6cf8ecb1d5ccbdb">cli_setup_with_tree</a>(init_tree)) {</div>
<div class="line">        <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;cli_setup_with_tree() failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a21"></a><a class="code" href="cli_8h.html#acdf842c97e00dc5de0e8792ef8e50ca7">cli_set_prompt</a>(my_prompt);</div>
<div class="line"> </div>
<div class="line">    vt_cls();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* put cursor at the bottom of the window */</span></div>
<div class="line">    <a name="a22"></a><a class="code" href="cne__stdio_8h.html#ab638714dd6596ee2a904abf94cdb0528">cne_printf_pos</a>(128, 1, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    (void)argc;</div>
<div class="line">    (void)argv;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (setup_cli() &lt; 0)</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a>(<span class="stringliteral">&quot;[green] Timer Test[], [magenta]lcore[] [red]%d[]\n&quot;</span>, <a name="a23"></a><a class="code" href="cne__system_8h.html#a1f8d5e6377b3181997e45418bf965dd5">cne_lcore_id</a>());</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Loop waiting for commands or ^C is pressed */</span></div>
<div class="line">    <a name="a24"></a><a class="code" href="cli_8h.html#a421ec791eb364d45efc61ae786783b91">cli_start</a>(<span class="stringliteral">&quot;CNDP Timer Example, use &#39;ls -rl&#39; or &#39;chelp -a&#39; to see all commands&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a name="a25"></a><a class="code" href="cli_8h.html#a794994debed8bf86e3c622eaaa8d9c6d">cli_destroy</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="acli_8h_html"><div class="ttname"><a href="cli_8h.html">cli.h</a></div></div>
<div class="ttc" id="acli_8h_html_a15f59cc70c25ca4987725bffc3513af6"><div class="ttname"><a href="cli_8h.html#a15f59cc70c25ca4987725bffc3513af6">cli_root_node</a></div><div class="ttdeci">static struct cli_node * cli_root_node(void)</div><div class="ttdef"><b>Definition:</b> <a href="cli_8h_source.html#l00561">cli.h:561</a></div></div>
<div class="ttc" id="acli_8h_html_a35aeed8da3ae396f19a01f8a3c7a5cf5"><div class="ttname"><a href="cli_8h.html#a35aeed8da3ae396f19a01f8a3c7a5cf5">cli_path_string</a></div><div class="ttdeci">static char * cli_path_string(struct cli_node *node, char *path)</div><div class="ttdef"><b>Definition:</b> <a href="cli_8h_source.html#l00475">cli.h:475</a></div></div>
<div class="ttc" id="acli_8h_html_a4193ce843f261e135341e11f15855303"><div class="ttname"><a href="cli_8h.html#a4193ce843f261e135341e11f15855303">cli_default_tree_init</a></div><div class="ttdeci">CNDP_API int cli_default_tree_init(void)</div></div>
<div class="ttc" id="acli_8h_html_a421ec791eb364d45efc61ae786783b91"><div class="ttname"><a href="cli_8h.html#a421ec791eb364d45efc61ae786783b91">cli_start</a></div><div class="ttdeci">CNDP_API void cli_start(const char *msg)</div></div>
<div class="ttc" id="acli_8h_html_a6624b815bb1ad7daa6cf8ecb1d5ccbdb"><div class="ttname"><a href="cli_8h.html#a6624b815bb1ad7daa6cf8ecb1d5ccbdb">cli_setup_with_tree</a></div><div class="ttdeci">CNDP_API int cli_setup_with_tree(cli_tree_t tree)</div></div>
<div class="ttc" id="acli_8h_html_a794994debed8bf86e3c622eaaa8d9c6d"><div class="ttname"><a href="cli_8h.html#a794994debed8bf86e3c622eaaa8d9c6d">cli_destroy</a></div><div class="ttdeci">CNDP_API void cli_destroy(void)</div></div>
<div class="ttc" id="acli_8h_html_a80526fe2f5840e0c2c4029158d61b2dd"><div class="ttname"><a href="cli_8h.html#a80526fe2f5840e0c2c4029158d61b2dd">cli_create</a></div><div class="ttdeci">CNDP_API int cli_create(struct cli_cfg *cfg)</div></div>
<div class="ttc" id="acli_8h_html_a8fedcc7d2be1ed98cbd1963e6b1be0f5"><div class="ttname"><a href="cli_8h.html#a8fedcc7d2be1ed98cbd1963e6b1be0f5">cli_add_tree</a></div><div class="ttdeci">CNDP_API int cli_add_tree(struct cli_node *dir, struct cli_tree *tree)</div></div>
<div class="ttc" id="acli_8h_html_a963a16e15423a2010c3ba7ad52d22aa5"><div class="ttname"><a href="cli_8h.html#a963a16e15423a2010c3ba7ad52d22aa5">cli_add_bin_path</a></div><div class="ttdeci">CNDP_API int cli_add_bin_path(const char *path)</div></div>
<div class="ttc" id="acli_8h_html_ac112cb168baf6a5196a1d653ff3b4215"><div class="ttname"><a href="cli_8h.html#ac112cb168baf6a5196a1d653ff3b4215">c_dir</a></div><div class="ttdeci">#define c_dir(n)</div><div class="ttdef"><b>Definition:</b> <a href="cli_8h_source.html#l00240">cli.h:240</a></div></div>
<div class="ttc" id="acli_8h_html_acdf842c97e00dc5de0e8792ef8e50ca7"><div class="ttname"><a href="cli_8h.html#acdf842c97e00dc5de0e8792ef8e50ca7">cli_set_prompt</a></div><div class="ttdeci">CNDP_API cli_prompt_t cli_set_prompt(cli_prompt_t prompt)</div></div>
<div class="ttc" id="acne_8h_html"><div class="ttname"><a href="cne_8h.html">cne.h</a></div></div>
<div class="ttc" id="acne_8h_html_a0f9cdd535e00d18a2c8aa9a318ec7bec"><div class="ttname"><a href="cne_8h.html#a0f9cdd535e00d18a2c8aa9a318ec7bec">cne_id</a></div><div class="ttdeci">CNDP_API int cne_id(void)</div></div>
<div class="ttc" id="acne__common_8h_html"><div class="ttname"><a href="cne__common_8h.html">cne_common.h</a></div></div>
<div class="ttc" id="acne__common_8h_html_a110ce74779a3879ca9ba9167c968cf27"><div class="ttname"><a href="cne__common_8h.html#a110ce74779a3879ca9ba9167c968cf27">__cne_unused</a></div><div class="ttdeci">#define __cne_unused</div><div class="ttdef"><b>Definition:</b> <a href="cne__common_8h_source.html#l00144">cne_common.h:144</a></div></div>
<div class="ttc" id="acne__cycles_8h_html"><div class="ttname"><a href="cne__cycles_8h.html">cne_cycles.h</a></div></div>
<div class="ttc" id="acne__cycles_8h_html_a7577842240981525ae7aabc09b504da7"><div class="ttname"><a href="cne__cycles_8h.html#a7577842240981525ae7aabc09b504da7">cne_rdtsc_precise</a></div><div class="ttdeci">static uint64_t cne_rdtsc_precise(void)</div><div class="ttdef"><b>Definition:</b> <a href="cne__cycles_8h_source.html#l00058">cne_cycles.h:58</a></div></div>
<div class="ttc" id="acne__cycles_8h_html_ac55d2d91ce3b8a4f809d2081aee902bb"><div class="ttname"><a href="cne__cycles_8h.html#ac55d2d91ce3b8a4f809d2081aee902bb">cne_rdtsc</a></div><div class="ttdeci">static uint64_t cne_rdtsc(void)</div><div class="ttdef"><b>Definition:</b> <a href="cne__cycles_8h_source.html#l00032">cne_cycles.h:32</a></div></div>
<div class="ttc" id="acne__stdio_8h_html"><div class="ttname"><a href="cne__stdio_8h.html">cne_stdio.h</a></div></div>
<div class="ttc" id="acne__stdio_8h_html_ab638714dd6596ee2a904abf94cdb0528"><div class="ttname"><a href="cne__stdio_8h.html#ab638714dd6596ee2a904abf94cdb0528">cne_printf_pos</a></div><div class="ttdeci">CNDP_API int cne_printf_pos(int16_t r, int16_t c, const char *fmt,...)</div></div>
<div class="ttc" id="acne__stdio_8h_html_acb5e6a7e2a06a6e65de91e951186606d"><div class="ttname"><a href="cne__stdio_8h.html#acb5e6a7e2a06a6e65de91e951186606d">cne_printf</a></div><div class="ttdeci">CNDP_API int cne_printf(const char *fmt,...)</div></div>
<div class="ttc" id="acne__system_8h_html"><div class="ttname"><a href="cne__system_8h.html">cne_system.h</a></div></div>
<div class="ttc" id="acne__system_8h_html_a1f8d5e6377b3181997e45418bf965dd5"><div class="ttname"><a href="cne__system_8h.html#a1f8d5e6377b3181997e45418bf965dd5">cne_lcore_id</a></div><div class="ttdeci">CNDP_API int cne_lcore_id(void)</div></div>
<div class="ttc" id="acne__system_8h_html_af0e5e66f54d3e1191b9f33dd8746a0b7"><div class="ttname"><a href="cne__system_8h.html#af0e5e66f54d3e1191b9f33dd8746a0b7">cne_get_timer_hz</a></div><div class="ttdeci">CNDP_API uint64_t cne_get_timer_hz(void)</div></div>
<div class="ttc" id="acne__timer_8h_html"><div class="ttname"><a href="cne__timer_8h.html">cne_timer.h</a></div></div>
<div class="ttc" id="acne__timer_8h_html_a1b83e490659cb1f969d0d484f26f6b21"><div class="ttname"><a href="cne__timer_8h.html#a1b83e490659cb1f969d0d484f26f6b21">cne_timer_reset</a></div><div class="ttdeci">int cne_timer_reset(struct cne_timer *tim, uint64_t ticks, enum cne_timer_type type, unsigned tim_thread, cne_timer_cb_t fct, void *arg)</div></div>
<div class="ttc" id="acne__timer_8h_html_a2d53f16541b4f76dfda1d84213ed2cc1"><div class="ttname"><a href="cne__timer_8h.html#a2d53f16541b4f76dfda1d84213ed2cc1">cne_timer_stop</a></div><div class="ttdeci">int cne_timer_stop(struct cne_timer *tim)</div></div>
<div class="ttc" id="acne__timer_8h_html_a903fec48fbfdd8ffc852b63c90d4d7be"><div class="ttname"><a href="cne__timer_8h.html#a903fec48fbfdd8ffc852b63c90d4d7be">cne_timer_subsystem_init</a></div><div class="ttdeci">void cne_timer_subsystem_init(void)</div></div>
<div class="ttc" id="acne__timer_8h_html_abca24cbe1db3da21efca35f6e07a8379"><div class="ttname"><a href="cne__timer_8h.html#abca24cbe1db3da21efca35f6e07a8379">cne_timer_init</a></div><div class="ttdeci">void cne_timer_init(struct cne_timer *tim)</div></div>
<div class="ttc" id="acne__timer_8h_html_ad91cc6ba9dc8677cb64af35f7a9eacd7"><div class="ttname"><a href="cne__timer_8h.html#ad91cc6ba9dc8677cb64af35f7a9eacd7">cne_timer_manage</a></div><div class="ttdeci">void cne_timer_manage(void)</div></div>
<div class="ttc" id="acne__timer_8h_html_aecc14b761eaf02adedbc59ff6f182a2f"><div class="ttname"><a href="cne__timer_8h.html#aecc14b761eaf02adedbc59ff6f182a2f">cne_timer_dump_stats</a></div><div class="ttdeci">void cne_timer_dump_stats(FILE *f)</div></div>
<div class="ttc" id="astructcne__timer_html"><div class="ttname"><a href="structcne__timer.html">cne_timer</a></div><div class="ttdef"><b>Definition:</b> <a href="cne__timer_8h_source.html#l00089">cne_timer.h:89</a></div></div>
<div class="ttc" id="avt100__out_8h_html"><div class="ttname"><a href="vt100__out_8h.html">vt100_out.h</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
